<script>

  var pageContent = $(".pageContent");
  var list = $("<table>").addClass("listAll").appendTo(pageContent);
  var thL = $("<th>").appendTo(list);
  var thR = $("<th>").appendTo(list);
  $(thL).html("Manufacturer");
  $(thR).html("Car name");

  $.getJSON('manufacturer', function (data) {
    var counter = 0;
       $.each(data, function (key, value) {
         counter++;
         var row = $("<tr>").attr("id",key + 1).appendTo(list);
         var colL = $("<td>").attr("id", key + 1 + "L").appendTo(row);
         var colR = $("<td>").attr("id", key + 1 + "R").appendTo(row);
         $(colL).html(value.manufacturer);
         $(colR).html(value.name);
      });
      if(counter <= 0)
      {
        var row = $("<tr>").appendTo(list);
        var colL = $("<td>").appendTo(row);
        var colR = $("<td>").appendTo(row);
          row.css("color","red");
        $(colL).html('THIS MANUFACTURER');
        $(colR).html("HAS NO CARS!");
      }
      carListClickHandler();
   });

   function carListClickHandler(){
     $(".listAll tr:not(:first-child)").on("click", function(){
       popUpRemoveOnlyClick();
       var id = this.id;
       var body = document.getElementsByTagName("BODY");
       var disableClick = $("<div>").addClass("hiddenBackground").appendTo(body);
       var informationPopUp = $("<div>").addClass("informationPopUp").appendTo(body);
       var exitPopUpImgBox = $("<div>").addClass("exitPopUp").appendTo(informationPopUp);
         var exitImg = $("<img>").appendTo(exitPopUpImgBox);
         $(exitImg).attr("src", "images/exit.png");
       var imgBox = $("<div>").addClass("informationImgBox").appendTo(informationPopUp);
         var img = $("<img>").appendTo(imgBox);
         $(img).attr("src", "images/car.png");
       var table = $("<div>").addClass("informationTable").appendTo(informationPopUp);

         $.getJSON('cars', function (data) {
           $.each(data[id-1], function (key, value) {
               var row = $("<tr>").appendTo(table);
                 var colL = $("<td>").appendTo(row);
                 var colR = $("<td>").appendTo(row);
                 $(colL).html(firstLetterUpperCase(key));
                 $(colR).html(value);
             });
          });
       exitPopUpHandler();
     });
   }
</script>
