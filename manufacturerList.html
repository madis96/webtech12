<script>

//ListManufacturers content (table with datas from manufacturers)
var pageContent = $(".pageContent");
var list = $("<table>").addClass("listAll").appendTo(pageContent);
var thL = $("<th>").appendTo(list);
$(thL).html("Manufacturer name");

$.getJSON('manufacturers', function (data) {
     $.each(data, function (key, value) {
       var row = $("<tr>").attr("id",key).appendTo(list);
       var colL = $("<td>").attr("id", key + 1 + "L").appendTo(row);
       $(colL).html(value.name);
    });
    manufacturersListClickHandler()
 });

 function manufacturersListClickHandler(){
   $(".listAll tr:not(:first-child)").on("click", function(){
     popUpRemoveOnlyClick();
     var id = this.id;
     var body = document.getElementsByTagName("BODY");
     var disableClick = $("<div>").addClass("hiddenBackground").appendTo(body);
     var informationPopUp = $("<div>").addClass("informationPopUp").appendTo(body);
     var exitPopUpImgBox = $("<div>").addClass("exitPopUp").appendTo(informationPopUp);
       var exitImg = $("<img>").appendTo(exitPopUpImgBox);
       $(exitImg).attr("src", "images/exit.png");
     var imgBox = $("<div>").addClass("informationImgBox").appendTo(informationPopUp);
       var img = $("<img>").appendTo(imgBox);
        $(img).attr("src", "images/manufacturers.png");

     var table = $("<div>").addClass("informationTable").appendTo(informationPopUp);

       $.getJSON('manufacturers', function (data) {
         $.each(data[id], function (key, value) {
             var row = $("<tr>").appendTo(table);
               var colL = $("<td>").appendTo(row);
               var colR = $("<td>").appendTo(row);
               $(colL).html(firstLetterUpperCase(key));
               $(colR).html(value);
           });
           document.cookie = "name=" + data[id].name;
           getCarsByCookies();
        });
     exitPopUpHandler();
   });

 }

 function getCarsByCookies(){
   var carsInList = "";
   var counter = 0;
   $.getJSON('manufacturer', function(data){
     $.each(data, function(key, value){
       counter++;
       carsInList = appendToString(carsInList, value.name);
       //console.log(value.name);
     });
     if(counter > 0)
      console.log(carsInList);
    else
      console.log("No cars from this manufacturer" + data);
   });
 }

 function appendToString(string, append){
   if(string == "")
      return append;
    else
      return string.concat(", " + append);
 }
</script>
